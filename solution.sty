\NeedsTeXFormat{LaTeX2e}[1994/06/01]

\ProvidesPackage{solution}[2016/09/01 v0.1 Various macros for creating documents with embedded solutions which can be compiled with or without the solutions included.]

\RequirePackage{comment}
\RequirePackage{adjustbox}
\RequirePackage{ifthen}
\RequirePackage{calc}
\RequirePackage[usenames,dvipsnames,svgnames,table]{xcolor}

\newif\if@solution\@solutionfalse
\DeclareOption{show}{
\@solutiontrue
}

\ProcessOptions\relax

\newcommand{\showsolution}{\@solutiontrue}
\newcommand{\hidesolution}{\@solutionfalse}

\newcommand{\workspace}[1][6pc]{\hspace*{1pt}\vspace*{#1}}

\newcommand*{\annot}[1]{\tag*{\footnotesize{\textcolor{black!70}{#1}}}}

\if@solution

\newenvironment{solution}{\par\medskip\hrule\par\medskip\noindent{\bf Solution.} \ignorespaces}{\par\medskip\hrule\par\medskip}

\excludecomment{antisolution}

\renewcommand{\workspace}[1][6pc]{\relax}

\newcommand{\soln}[1]{{\color{blue}#1}}
\newcommand{\bigsoln}[1]{\soln{#1}}
\newcommand{\solnx}[1]{\soln{#1}}
\newcommand*{\solnannot}[1]{\annot{#1}}

\else

\excludecomment{solution}
\includecomment{antisolution}

\newcommand*{\solnannot}[1]{\relax}
\newcommand{\soln}[1]{\phantom{#1}}
\newcommand{\bigsoln}[1]{\adjustbox{minipage=\textwidth,phantom}{#1}}
\newcommand{\solnx}[1]{\relax}

\fi

\endinput
